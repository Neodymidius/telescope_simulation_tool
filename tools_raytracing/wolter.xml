<?xml version="1.0"?>
<instrument telescop="Athena" instrume="WFI">
<telescope>
  // That's a first draft!
  <raytracer>
    <simulation_details n_photons="100000"/>
    // TODO Wolter renaming to wolter1, 2, or 3
    <type type="wolter" focal_length="1600" outer_diameter="358" inner_diameter="76" mirror_shells="54" mirror_height="150"/>
    <mirror exact="true" positions="174.2,169.19,164.39,159.60,155.04,150.61,146.32,142.12,138.07,134.15,130.28,126.55,122.98,119.45,116.02,112.72,109.46,106.34,103.36,100.41,97.52,94.69,91.95,89.36,86.80,84.34,81.96,79.59,77.30,75.07,72.93,70.87,68.85,66.85,64.92,63.07,61.32,59.53,57.83,56.15,54.58,53.00,51.52,50.05,48.59,47.22,45.84,44.56,43.30,42.09,40.87,39.67,38.47,37.24"/>
    <surface model="none" type="ggx" shadowing="ggx" roughness="0.0012" shadowing_alpha="0.0012" material="AU" material_path="/home/neo/software/sixte/tools/raytracing/AtomicScatteringFactors_new.fits"/>
    // TODO Coordinate system, add coordinate transformation; If Spider not needed, then code should not crash if spider tag is missing.
    <spider spider="false" path="/home/neo/Documents/baffle_spider.stl" position_x="0" position_y="0" position_z="3334.2948474700024"/>
    <sensor offset= "-0.4" sensor_x ="28800" sensor_y="28800"/>
  </raytracer>
<arf filename="athena_wfi_sixte_13rows_wo_filter_LDA_v20240209.arf"/>
<focallength value="12.0"/>
<fov diameter="1.0"/>
<psf filename="athena_psf_hew9_20231211.fits"/>
<vignetting filename="athena_vig_13rows_20231211.fits"/>
<pha2pi filename="athena_wfi_pha2pi_v20230609.fits"/>
<pirmf filename="athena_wfi_pirmf_v20230609.rmf"/>
</telescope>

<detector type="depfet">
<dimensions xwidth="512" ywidth="512"/>
<wcs xrpix="256.5" yrpix="256.5" xrval="0.0" yrval="0.0" xdelt="130.e-6" ydelt="130.e-6"/>
<depfet integration="1.0e-6" clear="1.0e-6" settling_1="5e-7" settling_2="4e-7" type="normal"/>
<rmf filename="athena_wfi_sixte_v20230523.rmf"/>
<phabackground filename="sixte_wfi_particle_bkg_20230602_nxb8.pha"/>
<split type="GAUSS" par1="11.e-6"/>

<threshold_readout_lo_keV value="60.e-3"/>
<threshold_event_lo_keV value="60.e-3"/>
<threshold_split_lo_keV value="60.e-3"/>
<readout mode="time">
  <loop start="0" end="511" increment="1" variable="$i">
    <wait time="3.9e-6"/>
    <readoutline lineindex="$i" readoutindex="$i"/>
  </loop>
  <newframe/>
</readout>
</detector>
</instrument>
